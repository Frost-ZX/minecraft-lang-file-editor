(function(){"use strict";var t={4238:function(t,e,n){n(750),n(6639),n(8803),n(5967);var o=n(5702),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("lang-actions",{attrs:{position:"top"},on:{"unicode-convert":t.handleUnicodeConvert}}),n("lang-editor",{ref:"langEditor"}),n("lang-actions",{attrs:{position:"bottom"}})],1)},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lang-actions"},[n("div",{staticClass:"wrapper"},["top"===t.position?[n("b-button",{attrs:{type:"is-primary"},on:{click:function(e){return t.selectFile()}}},[t._v("添加文件")]),n("input",{ref:"inputFile",staticClass:"input-file",attrs:{type:"file",accept:"application/json"},on:{change:function(e){return t.getLangFile(e)}}}),n("b-button",{attrs:{type:"is-success",disabled:!t.langCodeEdit},on:{click:function(e){return t.exportFile()}}},[t._v("保存文件")]),n("b-button",{attrs:{type:"is-danger"},on:{click:function(e){return t.resetData()}}},[t._v("重置数据")]),n("div",{staticClass:"lang-select"},[n("b-tooltip",{attrs:{label:"来源语言",position:"is-bottom",type:"is-dark"}},[n("b-select",{model:{value:t.langCodeSrc,callback:function(e){t.langCodeSrc=e},expression:"langCodeSrc"}},[n("option",{attrs:{value:""}},[t._v("无")]),t._l(t.langCodes,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)],1),n("b-tooltip",{attrs:{label:"编辑语言",position:"is-bottom",type:"is-dark"}},[n("b-select",{model:{value:t.langCodeEdit,callback:function(e){t.langCodeEdit=e},expression:"langCodeEdit"}},[n("option",{attrs:{value:""}},[t._v("无")]),t._l(t.langCodes,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)],1),n("b-tooltip",{staticClass:"lang-transfer",attrs:{label:"互换",position:"is-bottom",type:"is-dark"}},[n("b-button",{attrs:{type:"is-info","icon-right":"arrow-left-right"},on:{click:function(e){return t.transferLangCode()}}})],1)],1),n("b-button",{attrs:{type:"is-light"},on:{click:function(e){return t.$emit("unicode-convert","encode")}}},[t._v("Unicode 编码")]),n("b-button",{attrs:{type:"is-light"},on:{click:function(e){return t.$emit("unicode-convert","decode")}}},[t._v("Unicode 解码")])]:"bottom"===t.position?[n("b-pagination",{attrs:{"per-page":t.pageSize,total:t.totalSize,"range-before":2,"range-after":2,"debounce-page-input":500,order:"is-centered","page-input-position":"is-input-right","page-input":""},model:{value:t.pageNum,callback:function(e){t.pageNum=e},expression:"pageNum"}}),n("b-select",{model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(t.pageSizeList,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e)+" 条 / 页")])})),0)]:t._e()],2)])},s=[],l=n(770),c=(n(4692),n(9701),n(1014),n(2206),n(299),n(275),n(9492),n(731),n(1227)),u=n(8906),d=n(6132),g=n.n(d),p=n(639),f=n(2402),m=(n(1599),n(6905),n(9966),n(7579),n(7244),n(776),n(2484),n(7328),n(8222)),v=function(){function t(){(0,p.Z)(this,t)}return(0,f.Z)(t,[{key:"objPagination",value:function(t){var e=t.obj,n=void 0===e?null:e,o=t.pageNum,a=void 0===o?1:o,i=t.pageSize,r=void 0===i?20:i,s=n&&n.constructor===Object&&"number"===typeof a&&"number"===typeof r;if(!s)return console.error("获取数据失败，参数格式错误！"),null;var l=(a-1)*r,c=l+r,u=Object.keys(n),d=u.slice(l,c),g=u.length,p=d.length,f={};return d.forEach((function(t){f[t]=n[t]})),{obj:f,maxPage:Math.ceil(g/r),currPage:a,startPos:l+1,endPos:c,maxSize:g,currSize:p}}},{key:"readFileAsText",value:function(t,e){var n=[],o=t.currentTarget,a=o.files;if(!a||0===a.length)return Promise.resolve(n);var i=function(t,i){for(var r=[],s=function(t){var e=a[t],n=new FileReader,o=function(t,o){n.onload=function(){t({name:e.name||"unknown",content:n.result})},n.onerror=function(){o({name:e.name||"unknown",content:null})},n.readAsText(e)};r.push(new Promise(o))},l=0;l<a.length;l++)s(l);Promise.all(r).then((function(n){t(n),e&&(o["value"]="")})).catch((function(){i(n)}))};return new Promise(i)}},{key:"toast",value:function(t){var e=t.duration,n=void 0===e?2e3:e,o=t.indefinite,a=void 0!==o&&o,i=t.message,r=void 0===i?"":i,s=t.type,l=void 0===s?"is-info":s;return m.V.open({duration:n,indefinite:a,message:r,pauseOnHover:!0,type:l})}},{key:"uniDecode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof t)return console.error("转换失败，参数数据类型错误！"),null;if(""===t)return"";var e=new RegExp("\\\\u","g"),n=t.replace(e,"%u");try{return unescape(n)}catch(o){return console.error("转换失败",o),null}}},{key:"uniEncode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof t)return console.error("转换失败，参数数据类型错误！"),null;if(""===t)return"";for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n).toString(16).padStart(4,"0"));return"\\u"+e.join("\\u")}}]),t}(),h=new v,b=h;n(9106),n(2366);function y(){return(new Date).getTime()}o.Z.use(u.ZP);var C=new u.ZP.Store({state:{langCodes:[],langCodeEdit:"",langCodeSrc:"",langItemsDefault:{},langItemsEdit:{},langItemsUpdates:y(),pageNum:1,pageSize:20,totalSize:0},getters:{},mutations:{changePageNum:function(t,e){t.pageNum="number"===typeof e?e:1},changePageSize:function(t,e){t.pageSize="number"===typeof e?e:20},changeTotalSize:function(t,e){t.totalSize="number"===typeof e?e:0},resetLangItems:function(t){t.langCodeEdit="",t.langCodeSrc="",t.langCodes=[],t.pageNum=1,t.totalSize=0,t.langItemsDefault={},t.langItemsEdit={},t.langItemsUpdates=y()},setLangCode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,o=e.code,a="string"===typeof n&&"string"===typeof o;if(!a)return console.error("设置失败，参数格式错误！"),!1;if("src"===n)t.langCodeSrc=o;else{if("edit"!==n)return console.error("设置失败，type 不存在。"),!1;t.langCodeEdit=o}return!0},syncLangItems:function(t,e){e&&e.constructor===Object?t.langItemsEdit=e:console.error("同步失败，参数格式错误！")}},actions:{addLangItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={success:!1,msg:""},o=t.state,a=e.langCode,i=e.content,r="string"===typeof a&&"undefined"!==typeof i&&i.constructor===Object;if(!r)return n.msg="添加失败，参数格式错误！",n;var s=o.langCodes,l=o.langItemsDefault,c=o.langItemsEdit;if(s.includes(a))return n.msg="当前 Language Code 已存在，取消添加",n;for(var u in i){var d=i[u];if("string"!==typeof d)return n.msg="文件内容格式错误，添加失败。",n;!l[u]&&(l[u]={}),!c[u]&&(c[u]={}),l[u][a]=d,c[u][a]=d}return s.push(a),o.langItemsUpdates=y(),n.success=!0,n.msg="添加成功",n}},modules:{}}),S={name:"LangActions",props:{position:{type:String,default:"top"}},data:function(){return{pageSizeList:[10,20,30,40,50,100,200,500,1e3]}},computed:(0,l.Z)((0,l.Z)({},(0,u.rn)(["langCodes","langItemsEdit","totalSize"])),{},{langCodeSrc:{get:function(){return C.state.langCodeSrc},set:function(t){C.commit("setLangCode",{type:"src",code:t})}},langCodeEdit:{get:function(){return C.state.langCodeEdit},set:function(t){C.commit("setLangCode",{type:"edit",code:t})}},pageNum:{get:function(){return C.state.pageNum},set:function(t){C.commit("changePageNum",t)}},pageSize:{get:function(){return C.state.pageSize},set:function(t){C.commit("changePageSize",t)}}}),methods:{exportFile:function(){var t=this.langCodeEdit,e=this.langItemsEdit,n={};for(var o in e){var a=e[o][t];a&&(n[o]=a)}try{var i=JSON.stringify(n),r=i.replace(/\\\\u/g,"\\u"),s=new Blob([r],{type:"application/json;charset=utf-8"});(0,c.saveAs)(s,"".concat(t,".json"))}catch(l){console.error("[保存失败]",l),b.toast({duration:3e3,message:"保存失败！",type:"is-danger"})}},getLangFile:function(t){var e=this;b.readFileAsText(t,!0).then((function(t){var n=t[0],o="",a=null;if(n){try{o=n.name.replace(".json","")}catch(c){console.warn("[文件名解析失败]",c)}var i=new RegExp(/\\u/,"g");try{a=n.content.replace(i,"\\\\u"),a=g().parse(a)}catch(c){var r="JSON 解析失败（".concat(String(c),"）");return void b.toast({duration:5e3,message:r,type:"is-danger"})}var s=function(t){b.toast({duration:3e3,message:t.msg,type:t.success?"is-success":"is-warning"})},l=function(t){e.$store.dispatch("addLangItem",{langCode:t,content:a}).then(s)};e.$buefy.dialog.prompt({message:"当前文件的 Language Code",inputAttrs:{maxlength:16,placeholder:"例：en_us、zh_cn",value:o},onConfirm:l})}}))},selectFile:function(){var t=this.$refs["inputFile"];t&&t.click()},resetData:function(){var t=this,e=function(){t.$store.commit("resetLangItems"),b.toast({message:"已重置",type:"is-success"})};this.$buefy.dialog.confirm({message:"确定要重置编辑器的数据吗？",onConfirm:e})},transferLangCode:function(){var t=this.langCodeEdit,e=this.langCodeSrc;C.commit("setLangCode",{type:"edit",code:e}),C.commit("setLangCode",{type:"src",code:t})}}},E=S,k=n(8e3),_=(0,k.Z)(E,r,s,!1,null,"c7a078f6",null),D=_.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lang-editor"},[t.isDebug?n("div",{staticClass:"editor-debug"},[n("b-button",{attrs:{type:"is-light"},on:{click:function(e){return t.pullEditDatas()}}},[t._v("拉取 state")]),n("b-button",{attrs:{type:"is-light"},on:{click:function(e){return t.pushEditDatas(!0)}}},[t._v("推送 state")])],1):t._e(),n("div",{staticClass:"editor-content",on:{click:function(e){return t.handleClickContent(e)}}},[t.showLangItems?t._l(t.editDatasPage,(function(e,o,a){return n("div",{key:o,ref:"langItems",refInFor:!0,staticClass:"lang-item",class:{"is-add":!e[t.langCodeSrc]&&e[t.langCodeEdit],"is-del":e[t.langCodeSrc]&&!e[t.langCodeEdit]}},[n("div",{staticClass:"lang-key"},[n("span",{staticClass:"info-label"},[t._v("key:")]),n("span",{staticClass:"info-value"},[t._v(t._s(o))]),n("div",{staticClass:"item-actions"},[n("b-tooltip",{attrs:{label:"复制到剪贴板",position:"is-left",type:"is-dark"}},[n("b-icon",{staticClass:"btn",attrs:{icon:"content-copy"},nativeOn:{click:function(e){return t.copyToClipboard(a)}}})],1),n("b-tooltip",{attrs:{label:"复制到编辑区",position:"is-left",type:"is-dark"}},[n("b-icon",{staticClass:"btn",attrs:{icon:"content-duplicate"},nativeOn:{click:function(n){return t.copyToEdit(e)}}})],1)],1)]),n("b-field",{attrs:{label:t.langCodeSrc}},[n("b-input",{attrs:{readonly:""},model:{value:e[t.langCodeSrc],callback:function(n){t.$set(e,t.langCodeSrc,n)},expression:"langItem[langCodeSrc]"}})],1),n("b-field",{attrs:{label:t.langCodeEdit}},[n("b-input",{attrs:{type:"textarea","custom-class":"is-info","data-key":o,lazy:""},model:{value:e[t.langCodeEdit],callback:function(n){t.$set(e,t.langCodeEdit,n)},expression:"langItem[langCodeEdit]"}})],1)],1)})):t._e()],2)])},w=[],I={name:"LangEditor",data:function(){return{isDebug:!1,editDatas:null,editDatasPage:null,langKeyEditing:"",lastPushTimestamp:0,paginationDebounce:null}},computed:(0,l.Z)((0,l.Z)({},(0,u.rn)(["langCodeSrc","langCodeEdit","langItemsEdit","langItemsUpdates","pageNum","pageSize"])),{},{showLangItems:function(t){var e=t.langCodeSrc,n=t.langCodeEdit,o=t.editDatasPage;return e&&n&&o}}),watch:{langItemsUpdates:{handler:function(){console.log("[更新] langItemsUpdates"),this.pullEditDatas()}},pageNum:{handler:function(){console.log("[更新] pageNum"),this.getPageDatas()}},pageSize:{handler:function(){console.log("[更新] pageSize"),this.getPageDatas()}}},methods:{copyToClipboard:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=null===(t=this.$refs["langItems"])||void 0===t?void 0:t[e],o=null;n&&(o=n.getElementsByTagName("input")[0]),o?(o.focus(),o.select(),document.execCommand("copy")):console.error("复制失败，元素不存在！")},copyToEdit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.langCodeEdit,n=this.langCodeSrc,o=t[e];t[e]=t[n]||"","string"!==typeof o&&this.$forceUpdate()},getPageDatas:function(){var t=this;clearTimeout(this.paginationDebounce),this.paginationDebounce=setTimeout((function(){console.log("[更新] getPageDatas");var e=b.objPagination({obj:t.editDatas,pageNum:t.pageNum,pageSize:t.pageSize});e&&(t.editDatasPage=e.obj,t.$store.commit("changeTotalSize",e.maxSize))}),200)},handleClickContent:function(t){var e=t.target,n=e.dataset.key;this.langKeyEditing="string"===typeof n?n:"",this.pushEditDatas()},pullEditDatas:function(){this.editDatas=JSON.parse(JSON.stringify(this.langItemsEdit)),this.getPageDatas()},pushEditDatas:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.lastPushTimestamp,n=(new Date).getTime(),o=2e4;if(t||n-e>=o){console.log("[更新] 推送编辑器数据到 state");var a=JSON.parse(JSON.stringify(this.editDatas));this.$store.commit("syncLangItems",a),this.lastPushTimestamp=n}},unicodeConvert:function(t){if("undefined"!==typeof window.getSelection){var e=this.editDatas,n=this.langCodeEdit,o=this.langKeyEditing,a=String(window.getSelection());if(o&&a){var i=e[o],r=i[n];if("decode"===t){var s=b.uniDecode(a),l=r.replace(a,s);i[n]=l}else if("encode"===t){var c=b.uniEncode(a),u=r.replace(a,c);i[n]=u}else console.error("操作失败，该 type 不存在。")}else b.toast({duration:3e3,message:"请先选中编辑文本。",type:"is-warning"})}else b.toast({duration:3e3,message:"操作失败，当前浏览器不支持 getSelection()。",type:"is-warning"})}}},z=I,x=(0,k.Z)(z,P,w,!1,null,"a7616200",null),L=x.exports,O={name:"App",components:{LangActions:D,LangEditor:L},data:function(){return{}},methods:{handleUnicodeConvert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.$refs["langEditor"],n="unicodeConvert";e&&e[n]?e[n](t):console.error("处理失败，元素或函数不存在！")}}},N=O,T=(0,k.Z)(N,a,i,!1,null,null,null),j=T.exports,$=n(1571);n(4017);o.Z.config.productionTip=!1,o.Z.use($.ZP,{defaultIconPack:"mdi",defaultDialogConfirmText:"确定",defaultDialogCancelText:"取消"}),new o.Z({store:C,render:function(t){return t(j)}}).$mount("#app")}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,a,i){if(!o){var r=1/0;for(u=0;u<t.length;u++){o=t[u][0],a=t[u][1],i=t[u][2];for(var s=!0,l=0;l<o.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(s=!1,i<r&&(r=i));if(s){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[o,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,i,r=o[0],s=o[1],l=o[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var u=l(n)}for(e&&e(o);c<r.length;c++)i=r[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},o=self["webpackChunkminecraft_lang_file_editor"]=self["webpackChunkminecraft_lang_file_editor"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(4238)}));o=n.O(o)})();